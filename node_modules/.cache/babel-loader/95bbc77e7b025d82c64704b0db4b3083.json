{"ast":null,"code":"var _jsxFileName = \"/Users/axelengstrom/Code/speed-mimic-frontend/src/WebSocketDemo.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport useWebSocket, { ReadyState } from \"react-use-websocket\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SOCKET_URL = \"ws://localhost:1337\";\nexport const WebSocketDemo = () => {\n  _s();\n\n  const [messageHistory, setMessageHistory] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const {\n    lastMessage,\n    readyState,\n    sendMessage\n  } = useWebSocket(SOCKET_URL);\n  useEffect(() => {\n    if (lastMessage) {\n      setMessageHistory(prevState => [...prevState, lastMessage]);\n    }\n  }, [lastMessage, setMessageHistory]);\n  const connectionStatus = {\n    [ReadyState.CONNECTING]: \"Connecting\",\n    [ReadyState.OPEN]: \"Open\",\n    [ReadyState.CLOSING]: \"Closing\",\n    [ReadyState.CLOSED]: \"Closed\",\n    [ReadyState.UNINSTANTIATED]: \"Uninstantiated\"\n  }[readyState];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Your message\", /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: event => setMessage(event.target.value),\n        value: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: readyState !== ReadyState.OPEN,\n      onClick: () => {\n        sendMessage(message);\n        setMessage(\"\");\n      },\n      type: \"button\",\n      children: \"Send message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [\"The WebSocket is currently \", connectionStatus]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: messageHistory.map(_ref => {\n        let {\n          data,\n          timeStamp\n        } = _ref;\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          children: data || null\n        }, `${data}.${timeStamp}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WebSocketDemo, \"1GAcxUY63cC53dVqtexTcDeGVy0=\", false, function () {\n  return [useWebSocket];\n});\n\n_c = WebSocketDemo;\n\nvar _c;\n\n$RefreshReg$(_c, \"WebSocketDemo\");","map":{"version":3,"names":["useState","useEffect","useWebSocket","ReadyState","SOCKET_URL","WebSocketDemo","messageHistory","setMessageHistory","message","setMessage","lastMessage","readyState","sendMessage","prevState","connectionStatus","CONNECTING","OPEN","CLOSING","CLOSED","UNINSTANTIATED","event","target","value","map","data","timeStamp"],"sources":["/Users/axelengstrom/Code/speed-mimic-frontend/src/WebSocketDemo.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport useWebSocket, { ReadyState } from \"react-use-websocket\";\n\nconst SOCKET_URL = \"ws://localhost:1337\";\n\nexport const WebSocketDemo = () => {\n  const [messageHistory, setMessageHistory] = useState<MessageEvent[]>([]);\n  const [message, setMessage] = useState(\"\");\n  const { lastMessage, readyState, sendMessage } = useWebSocket(SOCKET_URL);\n\n  useEffect(() => {\n    if (lastMessage) {\n      setMessageHistory((prevState) => [...prevState, lastMessage]);\n    }\n  }, [lastMessage, setMessageHistory]);\n\n  const connectionStatus = {\n    [ReadyState.CONNECTING]: \"Connecting\",\n    [ReadyState.OPEN]: \"Open\",\n    [ReadyState.CLOSING]: \"Closing\",\n    [ReadyState.CLOSED]: \"Closed\",\n    [ReadyState.UNINSTANTIATED]: \"Uninstantiated\",\n  }[readyState];\n\n  return (\n    <div>\n      <label>\n        Your message\n        <input\n          onChange={(event) => setMessage(event.target.value)}\n          value={message}\n        />\n      </label>\n      <button\n        disabled={readyState !== ReadyState.OPEN}\n        onClick={() => {\n          sendMessage(message);\n          setMessage(\"\");\n        }}\n        type=\"button\"\n      >\n        Send message\n      </button>\n      <span>The WebSocket is currently {connectionStatus}</span>\n      <ul>\n        {messageHistory.map(({ data, timeStamp }) => (\n          <span key={`${data}.${timeStamp}`}>{data || null}</span>\n        ))}\n      </ul>\n    </div>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,YAAP,IAAuBC,UAAvB,QAAyC,qBAAzC;;AAEA,MAAMC,UAAU,GAAG,qBAAnB;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;EAAA;;EACjC,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCP,QAAQ,CAAiB,EAAjB,CAApD;EACA,MAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM;IAAEU,WAAF;IAAeC,UAAf;IAA2BC;EAA3B,IAA2CV,YAAY,CAACE,UAAD,CAA7D;EAEAH,SAAS,CAAC,MAAM;IACd,IAAIS,WAAJ,EAAiB;MACfH,iBAAiB,CAAEM,SAAD,IAAe,CAAC,GAAGA,SAAJ,EAAeH,WAAf,CAAhB,CAAjB;IACD;EACF,CAJQ,EAIN,CAACA,WAAD,EAAcH,iBAAd,CAJM,CAAT;EAMA,MAAMO,gBAAgB,GAAG;IACvB,CAACX,UAAU,CAACY,UAAZ,GAAyB,YADF;IAEvB,CAACZ,UAAU,CAACa,IAAZ,GAAmB,MAFI;IAGvB,CAACb,UAAU,CAACc,OAAZ,GAAsB,SAHC;IAIvB,CAACd,UAAU,CAACe,MAAZ,GAAqB,QAJE;IAKvB,CAACf,UAAU,CAACgB,cAAZ,GAA6B;EALN,EAMvBR,UANuB,CAAzB;EAQA,oBACE;IAAA,wBACE;MAAA,wCAEE;QACE,QAAQ,EAAGS,KAAD,IAAWX,UAAU,CAACW,KAAK,CAACC,MAAN,CAAaC,KAAd,CADjC;QAEE,KAAK,EAAEd;MAFT;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAQE;MACE,QAAQ,EAAEG,UAAU,KAAKR,UAAU,CAACa,IADtC;MAEE,OAAO,EAAE,MAAM;QACbJ,WAAW,CAACJ,OAAD,CAAX;QACAC,UAAU,CAAC,EAAD,CAAV;MACD,CALH;MAME,IAAI,EAAC,QANP;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QARF,eAkBE;MAAA,0CAAkCK,gBAAlC;IAAA;MAAA;MAAA;MAAA;IAAA,QAlBF,eAmBE;MAAA,UACGR,cAAc,CAACiB,GAAf,CAAmB;QAAA,IAAC;UAAEC,IAAF;UAAQC;QAAR,CAAD;QAAA,oBAClB;UAAA,UAAoCD,IAAI,IAAI;QAA5C,GAAY,GAAEA,IAAK,IAAGC,SAAU,EAAhC;UAAA;UAAA;UAAA;QAAA,QADkB;MAAA,CAAnB;IADH;MAAA;MAAA;MAAA;IAAA,QAnBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA2BD,CA9CM;;GAAMpB,a;UAGsCH,Y;;;KAHtCG,a"},"metadata":{},"sourceType":"module"}